# Команды для отладки проблемы на VPS 188.166.61.86

# 1. Проверка статуса сервиса
systemctl status autobid-full

# 2. Просмотр логов приложения
journalctl -u autobid-full --no-pager -l

# 3. Проверка файлов на VPS
ls -la /var/www/autobid/dist/
ls -la /var/www/autobid/.env

# 4. Проверка процессов Node.js
ps aux | grep node

# 5. Проверка портов
netstat -tlnp | grep :3001

# 6. Тест прямого подключения к API
curl -v http://localhost:3001/api/health

# 7. Проверка Nginx логов
tail -f /var/log/nginx/error.log

# 8. Проверка подключения к базе данных
sudo -u postgres psql -d autobid_db -c "SELECT version();"

# ВОЗМОЖНЫЕ ПРОБЛЕМЫ И РЕШЕНИЯ:

# Если сервис не запускается:
sudo systemctl restart autobid-full
sudo systemctl enable autobid-full

# Если файлы отсутствуют:
# Нужно скопировать dist/index.js, dist/public/, package.json на VPS

# Если база данных недоступна:
sudo systemctl status postgresql
sudo systemctl start postgresql

# Если порт занят:
sudo killall node
sudo systemctl restart autobid-full

# Если проблемы с правами:
sudo chown -R www-data:www-data /var/www/autobid
sudo chmod 755 /var/www/autobid

# ПОЛНАЯ ПЕРЕЗАГРУЗКА СЕРВИСОВ:
sudo systemctl stop autobid-full
sudo systemctl daemon-reload
sudo systemctl start autobid-full
sudo nginx -t && sudo systemctl reload nginx