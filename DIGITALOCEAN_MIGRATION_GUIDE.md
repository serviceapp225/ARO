# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –º–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ DigitalOcean

## –ü–æ–ª–Ω–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ DigitalOcean

### ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞:
- **PostgreSQL**: `autobid-production` –∫–ª–∞—Å—Ç–µ—Ä –≤ Amsterdam (AMS3) - $15.15/–º–µ—Å—è—Ü
- **Spaces**: `autobid-storage` –≤ Amsterdam (AMS3) - $5/–º–µ—Å—è—Ü  
- **VPS**: `Sms-proxy` IP 188.166.61.86, 4GB RAM - $24/–º–µ—Å—è—Ü ‚úÖ
- **–ò—Ç–æ–≥–æ**: $44.15/–º–µ—Å—è—Ü

### üéØ –ü–ª–∞–Ω –º–∏–≥—Ä–∞—Ü–∏–∏:
- **–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ** ‚Üí VPS `Sms-proxy` (–ø–æ–ª–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è —Å Replit)
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** ‚Üí PostgreSQL DigitalOcean
- **–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è** ‚Üí Spaces DigitalOcean  
- **SMS** ‚Üí –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —á–µ—Ä–µ–∑ —Ç–æ—Ç –∂–µ VPS

### üìã –î–∞–Ω–Ω—ã–µ –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ VPS:

#### 1. PostgreSQL –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ:
```env
DATABASE_URL=postgresql://doadmin:–í–ê–®_–ü–ê–†–û–õ–¨@autobid-production-do-user-24204575-0.m.db.ondigitalocean.com:25060/autobid_db?sslmode=require
```

#### 2. DigitalOcean Spaces:
```env
DO_SPACES_ENDPOINT=ams3.digitaloceanspaces.com
DO_SPACES_BUCKET=autobid-storage
DO_SPACES_ACCESS_KEY=–í–ê–®_ACCESS_KEY
DO_SPACES_SECRET_KEY=–í–ê–®_SECRET_KEY
DO_SPACES_CDN_ENDPOINT=https://autobid-storage.ams3.cdn.digitaloceanspaces.com
```

## –ü–æ—à–∞–≥–æ–≤–∞—è –º–∏–≥—Ä–∞—Ü–∏—è:

### –®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ VPS
1. **VPS –≥–æ—Ç–æ–≤**: 4GB RAM ‚úÖ
2. **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ VPS**: `ssh root@188.166.61.86`

### –®–∞–≥ 2: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```bash
# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
apt update && apt upgrade -y

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Node.js 20
curl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash -
apt-get install -y nodejs git

# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
git clone –í–ê–®_–†–ï–ü–û–ó–ò–¢–û–†–ò–ô_URL autobid-tj
cd autobid-tj

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π  
npm install

# –°–æ–∑–¥–∞–Ω–∏–µ .env —Ñ–∞–π–ª–∞
cp .env.production.do .env
```

### –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
nano .env
```

**–ó–∞–ø–æ–ª–Ω–∏—Ç—å:**
- `DATABASE_URL` - —Å—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è PostgreSQL
- `DO_SPACES_ACCESS_KEY` - Access Key –æ—Ç Spaces
- `DO_SPACES_SECRET_KEY` - Secret Key –æ—Ç Spaces
- `SESSION_SECRET` - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π —Å–µ–∫—Ä–µ—Ç —Å–µ—Å—Å–∏–π

### –®–∞–≥ 4: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
```bash
# –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Å—Ö–µ–º—ã –∫ –Ω–æ–≤–æ–π PostgreSQL –ë–î
npm run db:push
```

### –®–∞–≥ 5: –ú–∏–≥—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ Spaces
```bash
# –ó–∞–ø—É—Å–∫ —Å–∫—Ä–∏–ø—Ç–∞ –º–∏–≥—Ä–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
node server/scripts/migrateToSpaces.js
```

### –®–∞–≥ 6: –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫
```bash
# –°–±–æ—Ä–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
npm run build

# –ó–∞–ø—É—Å–∫ –≤ production —Ä–µ–∂–∏–º–µ
npm start
```

### –®–∞–≥ 7: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–æ–º–µ–Ω–∞
1. **DNS –∑–∞–ø–∏—Å—å**: `autobid.tj` ‚Üí `188.166.61.86`
2. **Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è** (–µ—Å–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ)
3. **SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç** —á–µ—Ä–µ–∑ Let's Encrypt

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ DigitalOcean –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã:

### üöÄ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:
- **Managed PostgreSQL**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—ç–∫–∞–ø—ã, –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
- **Spaces CDN**: –±—ã—Å—Ç—Ä–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –ø–æ –≤—Å–µ–º—É –º–∏—Ä—É
- **Amsterdam –¥–∞—Ç–∞—Ü–µ–Ω—Ç—Ä**: –æ–ø—Ç–∏–º–∞–ª—å–Ω–∞—è –ª–æ–∫–∞—Ü–∏—è –¥–ª—è –°–ù–ì

### üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:
- **Trusted Sources**: –¥–æ—Å—Ç—É–ø –∫ PostgreSQL —Ç–æ–ª—å–∫–æ —Å VPS IP
- **Encrypted connections**: SSL/TLS –¥–ª—è –≤—Å–µ—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- **Automatic backups**: –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –±—ç–∫–∞–ø—ã PostgreSQL

### üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å:
- **–§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ü–µ–Ω–∞**: $44/–º–µ—Å—è—Ü –∑–∞ –ø–æ–ª–Ω—É—é –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É
- **–ë–µ–∑ –∫–æ–º–∏—Å—Å–∏–π**: –∑–∞ —Ç—Ä–∞—Ñ–∏–∫ –∏ —Ö—Ä–∞–Ω–µ–Ω–∏–µ (–≤ –ª–∏–º–∏—Ç–∞—Ö Spaces)
- **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**: –ª–µ–≥–∫–æ–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –º–æ—â–Ω–æ—Å—Ç–∏ –ø—Ä–∏ —Ä–æ—Å—Ç–µ

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ:

### üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:
- **PostgreSQL**: –º–µ—Ç—Ä–∏–∫–∏ –≤ –ø–∞–Ω–µ–ª–∏ DigitalOcean
- **Spaces**: —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è  
- **VPS**: –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å–æ–≤

### üõ†Ô∏è –û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ:
- **PostgreSQL**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- **Backups**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –±—ç–∫–∞–ø—ã
- **SSL certificates**: –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

## Rollback –ø–ª–∞–Ω:

### –í —Å–ª—É—á–∞–µ –ø—Ä–æ–±–ª–µ–º:
1. **–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ**: —ç–∫—Å–ø–æ—Ä—Ç PostgreSQL
2. **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å VPS**: –∏–∑ –±—ç–∫–∞–ø–∞ –∏–ª–∏ –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫–∞  
3. **–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å DNS**: –Ω–∞ —Ä–µ–∑–µ—Ä–≤–Ω—ã–π —Å–µ—Ä–≤–µ—Ä
4. **–ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö**: –≤ —Ä–µ–∑–µ—Ä–≤–Ω—É—é –ë–î

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏:

### ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç:
- [ ] –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ó–∞–≥—Ä—É–∑–∫–∞/–æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —á–µ—Ä–µ–∑ Spaces
- [ ] SMS —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç
- [ ] WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å—Ç–∞–±–∏–ª—å–Ω—ã
- [ ] –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∞—É–∫—Ü–∏–æ–Ω–∞ —Ä–∞–±–æ—Ç–∞—é—Ç
- [ ] –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–∞—è

### üîß –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
```bash
# –¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ PostgreSQL
npm run test:db

# –¢–µ—Å—Ç –∑–∞–≥—Ä—É–∑–∫–∏ –≤ Spaces  
npm run test:storage

# –¢–µ—Å—Ç SMS API
npm run test:sms
```

–ì–æ—Ç–æ–≤—ã –Ω–∞—á–∏–Ω–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é?