# üîß –ö–û–ú–ê–ù–î–´ –î–õ–Ø –í–´–ü–û–õ–ù–ï–ù–ò–Ø –ù–ê VPS (188.166.61.86)

# –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ VPS –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —ç—Ç–∏ –∫–æ–º–∞–Ω–¥—ã –ø–æ –æ—á–µ—Ä–µ–¥–∏:

# === –≠–¢–ê–ü 1: –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø ===

systemctl stop autobid

cd ~/autobid-tj

cat > app.js << 'SIMPLE_APP'
const express = require('express');
const app = express();

app.get('/', (req, res) => {
  res.send(`
<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <title>AutoBid.TJ VPS</title>
  <style>
    body { font-family: Arial; background: linear-gradient(135deg, #667eea, #764ba2); margin: 0; padding: 50px; color: white; text-align: center; }
    .card { background: white; color: #333; padding: 30px; border-radius: 15px; max-width: 500px; margin: 0 auto; box-shadow: 0 10px 30px rgba(0,0,0,0.2); }
    .ok { background: #4CAF50; color: white; padding: 15px; border-radius: 8px; margin: 20px 0; }
    .info { background: #f0f8ff; padding: 10px; border-radius: 5px; margin: 10px 0; }
  </style>
</head>
<body>
  <h1>üöó AutoBid.TJ</h1>
  <div class="card">
    <div class="ok">‚úÖ VPS –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç!</div>
    
    <div class="info">–°–µ—Ä–≤–µ—Ä: 188.166.61.86</div>
    <div class="info">Nginx: –ù–∞—Å—Ç—Ä–æ–µ–Ω</div>
    <div class="info">–†–∞–±–æ—Ç–∞–µ—Ç: ${Math.floor(process.uptime())} —Å–µ–∫</div>
    
    <p><a href="/health" style="background: #667eea; color: white; padding: 10px 20px; text-decoration: none; border-radius: 20px;">Health Check</a></p>
    
    <p style="margin-top: 20px; color: #666;">
      –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥: PostgreSQL –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
    </p>
  </div>
</body>
</html>
  `);
});

app.get('/health', (req, res) => {
  res.json({
    status: 'OK',
    service: 'AutoBid.TJ',
    server: '188.166.61.86',
    uptime: process.uptime(),
    database: 'Not installed',
    next: 'PostgreSQL installation'
  });
});

app.listen(3001, '0.0.0.0', () => {
  console.log('AutoBid.TJ –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 3001');
});
SIMPLE_APP

systemctl start autobid

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
systemctl is-active autobid && echo "‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç!" || echo "‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è"

# === –≠–¢–ê–ü 2: –£–°–¢–ê–ù–û–í–ö–ê POSTGRESQL ===

apt update
DEBIAN_FRONTEND=noninteractive apt install -y postgresql postgresql-contrib

systemctl start postgresql
systemctl enable postgresql

# === –≠–¢–ê–ü 3: –ù–ê–°–¢–†–û–ô–ö–ê –ë–ê–ó–´ –î–ê–ù–ù–´–• ===

sudo -u postgres createdb autobid_db
sudo -u postgres createuser autobid_user
sudo -u postgres psql -c "ALTER USER autobid_user WITH PASSWORD 'AutoBid2025';"
sudo -u postgres psql -c "GRANT ALL PRIVILEGES ON DATABASE autobid_db TO autobid_user;"

# –°–æ–∑–¥–∞–Ω–∏–µ .env —Ñ–∞–π–ª–∞
cat > .env << 'ENV_FILE'
NODE_ENV=production  
PORT=3001
DATABASE_URL=postgresql://autobid_user:AutoBid2025@localhost:5432/autobid_db
ENV_FILE

echo ""
echo "üéâ === –†–ê–ó–í–ï–†–¢–´–í–ê–ù–ò–ï –ó–ê–í–ï–†–®–ï–ù–û! ==="
echo ""
echo "‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã:"
echo "   üåê –°–∞–π—Ç: http://188.166.61.86"
echo "   üè• Health: http://188.166.61.86/health"  
echo "   üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: autobid_db"
echo "   üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: autobid_user"
echo "   üîê –ü–∞—Ä–æ–ª—å: AutoBid2025"
echo ""

systemctl status autobid --no-pager -l | head -3
systemctl status postgresql --no-pager -l | head -3