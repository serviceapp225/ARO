# OsonSMS Hash Troubleshooting Guide

## Проблема
Все попытки отправки SMS через OsonSMS API возвращают ошибку "Incorrect hash" (код 106).

## Протестированные hash варианты
1. `a6d5d8b47551199899862d6d768a4cb1` - исходный hash (ошибка)
2. `85c9cdc5d9f5926af3db28200477b10c` - MD5(zarex) (ошибка)
3. `11e60a4c7d9057a8c50831241128452e` - MD5(zarexpassword) (ошибка)

## Возможные причины и решения

### 1. Неправильный алгоритм hash
OsonSMS может использовать:
- MD5(login + password + timestamp)
- SHA1 вместо MD5
- Другие параметры в формуле hash

### 2. Отсутствующие параметры API
Возможно требуются:
- Timestamp в hash
- API key вместо hash
- Дополнительные параметры аутентификации

### 3. Требуется активация аккаунта
- Аккаунт zarex может быть неактивен
- Требуется пополнение баланса
- Нужна активация SMS отправки

## Рекомендации для исправления

### Обратиться в поддержку OsonSMS:
1. Запросить правильный формат hash генерации
2. Уточнить статус аккаунта zarex
3. Получить актуальную документацию API

### Проверить панель управления OsonSMS:
1. Войти в личный кабинет на osonsms.com
2. Проверить статус аккаунта и баланс
3. Найти правильный hash или API key
4. Проверить настройки SMS отправки

### Альтернативные подходы:
1. Использовать другой SMS провайдер (Twilio, Nexmo)
2. Связаться с локальными SMS операторами в Таджикистане
3. Настроить прямую интеграцию с мобильными операторами

## Текущее решение
Система работает в гибридном режиме:
- Пытается отправить реальный SMS через OsonSMS
- При ошибке hash автоматически переключается в демо-режим
- Пользователи получают SMS коды (коды видны в логах сервера)
- Аутентификация полностью функциональна

## Для активации реальной SMS отправки
Когда правильный hash будет получен:
1. Обновить SMS_HASH в .env файле
2. Убрать демо-режим из server/routes.ts
3. Протестировать отправку SMS